kind: ZarfPackageConfig
metadata:
  name: test-values
  description: Minimal test package for values feature

values:
  files:
    - values.yaml

components:
  - name: test-values-component
    required: true
    actions:
      onDeploy:
        before:
          - cmd: echo '{"myKey":"myValue"}'
            setValues:
              - key: .json
                type: json
          - cmd: >
              echo 'myKey: myValue'
            setValues:
              - key: .yaml
                type: yaml
      onRemove:
        before:
          - cmd: echo "{{ .Values.test }}" > /tmp/zarf-remove-test.txt
          - cmd: echo "{{ .Values.removeKey }}" > /tmp/zarf-remove-custom.txt
    manifests:
      - name: test-configmap
        template: true
        files:
          - configmap.yaml
      - name: test-action-configmap
        template: true
        files:
          - action-configmap.yaml
